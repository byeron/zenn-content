---
title: "Setup routing to specific network in Ubuntu"
emoji: "ğŸ¡"
type: "tech" # tech: æŠ€è¡“è¨˜äº‹ / idea: ã‚¢ã‚¤ãƒ‡ã‚¢
topics: ["network"]
published: true
---

# ç‰¹å®šã®ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯ã¸ã®ãƒ«ãƒ¼ãƒ†ã‚£ãƒ³ã‚°ã‚’ã—ãŸã„

## ipã‚³ãƒãƒ³ãƒ‰
- `ip route add ${ne_cidr} via ${gateway} dev ${interface}`
  - `ip route add`:ãƒ«ãƒ¼ãƒ†ã‚£ãƒ³ã‚°è¨­å®šã‚’è¿½åŠ 
  - `nw_cidr`: å¯¾å‘NWã®CIDRã€`192.168.0.0/24`ã¿ãŸã„ãªå½¢å¼
  - `gateway`: gatewayã®IP
  - `interface`: `ip a`ã§ç¢ºèªã§ãã‚‹`ens192`ã¿ãŸã„ãªã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ã‚¤ã‚¹ã‚’æŒ‡å®š

## routeã‚³ãƒãƒ³ãƒ‰

ï¼ˆãƒ«ãƒ¼ãƒ†ã‚£ãƒ³ã‚°è¨­å®šã¯ã“ã‚Œã‹ã‚‰åŸºæœ¬çš„ã«`ip`ã‚³ãƒãƒ³ãƒ‰ã‚’ä½¿ã†æµã‚Œã‚‰ã—ã„ï¼‰
- `route add -net ${nw_address} netmask ${subnet_mask} gw ${gateway} ${interface}`
  - `nw_address`: å¯¾å‘NWã®ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯ã‚¢ãƒ‰ãƒ¬ã‚¹ã€‚ï¼ˆ192.168.0.0/24ã®NWãªã‚‰ãƒ›ã‚¹ãƒˆéƒ¨0ã®`192.168.0.0`ï¼‰
  - `subnet_mask`: ã‚µãƒ–ãƒãƒƒãƒˆãƒã‚¹ã‚¯ã€‚ï¼ˆ192.168.0.0/24ã®ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯ãªã‚‰`255.255.255.0`ã€‚`ipcalc`ã‚³ãƒãƒ³ãƒ‰ã¨ã‹ã§ã‚ˆãèª¿ã¹ã‚‹ï¼‰
  - `gateway`: gatewayã®IP
  - `interface`: interfaceã‚’æŒ‡å®šï¼ˆipã‚³ãƒãƒ³ãƒ‰ä½¿ã£ãŸãƒ«ãƒ¼ãƒ†ã‚£ãƒ³ã‚°ã¨ä¸€ç·’ï¼‰
